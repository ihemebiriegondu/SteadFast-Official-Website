<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steadfast Admin Dashboard</title>

    <link rel="shortcut icon" href="../images/logo.jpg" type="image/x-icon">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../css/main.min.css">

    <link rel="stylesheet" href="dashboard.css">
</head>

<body class="dashboard-body">
    <div class="home">
        <div class="bg-primary dark-div">
            <div class="first-home-div d-flex align-items-baseline">
                <div>
                    <a href="#sidebar" class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas"
                        role="button" aria-controls="sidebar">
                        <i class="bi bi-list text-primary"></i>
                    </a>
                </div>
                <div class="d-flex nav-link" onclick="hideAllEventBackdrop()">
                    <h1 class="mb-0 mt-0 text-primary fw-normal me-1">SPS</h1>
                    <img src="../images/logo-removebg-preview.png" alt="">
                </div>
            </div>
            <div>
                <div class="offcanvas offcanvas-end" tabindex="1" id="sidebar" aria-labelledby="sidebar-label">
                    <div class="offcanvas-header">
                        <button type="button" class="btn-close mt-3" data-bs-dismiss="offcanvas"
                            aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body ps-5 d-flex flex-column justify-content-between align-items-start">
                        <ul class="navbar-nav text-uppercase mb-2 mb-lg-0 w-100 justify-content-around">
                            <li class="nav-item">
                                <p class="nav-link active text-primary p-0" aria-current="page"
                                    onclick="hideAllEventBackdrop(event)" data-bs-dismiss="offcanvas">Dashboard</p>
                            </li>
                            <li class="nav-item text-decoration-none m-0 text-uppercase" style="list-style-type: none;">
                                <p class="nav-link text-primary p-0" data-myOffcanvas="upcoming-events"
                                    onclick="showEventBackdrop(event)" data-bs-dismiss="offcanvas">Upcoming Events</p>
                            </li>
                            <li class="nav-item text-decoration-none m-0 text-uppercase" style="list-style-type: none;">
                                <p class="nav-link text-primary p-0" data-myOffcanvas="staff-list"
                                    onclick="showEventBackdrop(event)" data-bs-dismiss="offcanvas">Staff List</p>
                            </li>
                            <li class="nav-item text-decoration-none m-0 text-uppercase" style="list-style-type: none;">
                                <p class="nav-link text-primary p-0" data-myOffcanvas="students-list"
                                    onclick="showEventBackdrop(event)" data-bs-dismiss="offcanvas">Students e-learning
                                    list</p>
                            </li>
                            <li class="nav-item text-decoration-none m-0 text-uppercase" style="list-style-type: none;">
                                <p class="nav-link text-primary p-0" data-myOffcanvas="news-list"
                                    onclick="showEventBackdrop(event)" data-bs-dismiss="offcanvas">News
                                    list</p>
                            </li>
                        </ul>
                        <div>
                            <p class="text-primary" role="button" id="logOutButton"><i
                                    class="bi bi-box-arrow-in-left me-2"></i>Log out</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="second-home-div">
                <h1 class="text-light text-center p-0 m-0">Dashboard</h1>
            </div>
        </div>
        <div class="third-home-div">
            <div class="upward-margin">
                <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
                    <div class="col m-0 mb-4">
                        <div class="card justify-content-center shadow" data-myOffcanvas="upcoming-events"
                            onclick="showEventBackdrop(event)">
                            <div class="d-flex flex-column align-items-center justify-content-center"
                                data-myoffcanvas="upcoming-events">
                                <i class="bi bi-calendar-plus text-center text-primary"
                                    data-myOffcanvas="upcoming-events"></i>
                                <p class="text-center p-0 m-0 text-primary" data-myOffcanvas="upcoming-events">Upcoming
                                    Events</p>
                            </div>
                        </div>
                    </div>
                    <div class="col m-0 mb-4">
                        <div class="card justify-content-center shadow" data-myOffcanvas="staff-list"
                            onclick="showEventBackdrop(event)">
                            <div class="d-flex flex-column justify-content-center" data-myOffcanvas="staff-list">
                                <i class="bi bi-people text-center text-primary" data-myOffcanvas="staff-list"></i>
                                <p class="text-center p-0 m-0 text-primary" data-myOffcanvas="staff-list">Staffs</p>
                            </div>
                        </div>
                    </div>
                    <div class="col m-0 mb-4">
                        <div class="card justify-content-center shadow" data-myOffcanvas="students-list"
                            onclick="showEventBackdrop(event)">
                            <div class="d-flex flex-column align-items-center justify-content-center"
                                data-myOffcanvas="students-list">
                                <i class="bi bi-calendar-plus text-center text-primary"
                                    data-myOffcanvas="students-list"></i>
                                <p class="text-center p-0 m-0 text-primary" data-myOffcanvas="students-list">Students
                                    e-learning list</p>
                            </div>
                        </div>
                    </div>
                    <div class="col m-0 mb-4">
                        <div class="card justify-content-center shadow" data-myOffcanvas="news-list"
                            onclick="showEventBackdrop(event)">
                            <div class="d-flex flex-column align-items-center justify-content-center"
                                data-myOffcanvas="news-list">
                                <i class="bi bi-calendar-plus text-center text-primary"
                                    data-myOffcanvas="news-list"></i>
                                <p class="text-center p-0 m-0 text-primary" data-myOffcanvas="news-list">News</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--Upcoming event list offcanvas-->
    <div class="upcoming-events myoffcanvases" id="upcoming-events">
        <div class="bg-primary dark-div">
            <div class="first-home-div d-flex align-items-baseline">
                <div>
                    <a href="#sidebar" class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas"
                        role="button" aria-controls="sidebar">
                        <i class="bi bi-list text-primary"></i>
                    </a>
                </div>
                <div class="d-flex nav-link" onclick="hideAllEventBackdrop()">
                    <h1 class="mb-0 mt-0 text-primary fw-normal me-1">SPS</h1>
                    <img src="../images/logo-removebg-preview.png" alt="">
                </div>
            </div>
            <div class="second-home-div">
                <h1 class="text-light text-center p-0 m-0">Upcoming Events</h1>
            </div>
        </div>
        <div class="pt-5">
            <ul id="upcomingevent">
                <!-- Adding list elements -->
            </ul>
            <div class="no-event d-none">
                <p class="text-center">No upcoming events</p>
            </div>
        </div>
        <div class="d-flex align-items-center justify-content-center pb-5">
            <button class="btn add-btn my-5" type="button" data-bs-toggle="modal" data-bs-target="#staticBackdrop2"
                onclick="showAddEventFunction()">Add
                Event</button>
        </div>
    </div>


    <!--Staff list offcanvas-->
    <div class="upcoming-events myoffcanvases" id="staff-list">
        <div class="bg-primary dark-div">
            <div class="first-home-div d-flex align-items-baseline">
                <div>
                    <a href="#sidebar" class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas"
                        role="button" aria-controls="sidebar">
                        <i class="bi bi-list text-primary"></i>
                    </a>
                </div>
                <div class="d-flex nav-link" onclick="hideAllEventBackdrop()">
                    <h1 class="mb-0 mt-0 text-primary fw-normal me-1">SPS</h1>
                    <img src="../images/logo-removebg-preview.png" alt="">
                </div>
            </div>
            <div class="second-home-div">
                <h1 class="text-light text-center p-0 m-0">Staff List</h1>
            </div>
        </div>
        <div class="pt-5">
            <h5 class="staff-listSubTitle">Administration</h5>
            <ul id="adminlist" class="ps-5">
                <!-- Adding list elements -->
            </ul>
        </div>
        <div class="pt-5">
            <h5 class="staff-listSubTitle">Staffs</h5>
            <ol id="stafflist" class="ps-5">
                <!-- Adding list elements -->
            </ol>
        </div>
        <div class="d-flex align-items-center justify-content-center pb-5">
            <button class="btn add-btn my-5" type="button" data-bs-toggle="modal" data-bs-target="#staticBackdrop2"
                onclick="showAddStaffFunction()">Add
                Staff</button>
        </div>
    </div>


    <!--E-learning list offcanvas-->
    <div class="upcoming-events myoffcanvases" id="students-list">
        <div class="bg-primary dark-div">
            <div class="first-home-div d-flex align-items-baseline">
                <div>
                    <a href="#sidebar" class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas"
                        role="button" aria-controls="sidebar">
                        <i class="bi bi-list text-primary"></i>
                    </a>
                </div>
                <div class="d-flex nav-link" onclick="hideAllEventBackdrop()">
                    <h1 class="mb-0 mt-0 text-primary fw-normal me-1">SPS</h1>
                    <img src="../images/logo-removebg-preview.png" alt="">
                </div>
            </div>
            <div class="second-home-div">
                <h1 class="text-light text-center p-0 m-0">E-learning</h1>
            </div>
        </div>
        <div class="pt-5">
            <ul id="studentlist">
                <!-- Adding list elements -->
            </ul>
        </div>
        <div class="d-flex align-items-center justify-content-center pb-5">
            <button class="btn add-btn my-5" type="button" data-bs-toggle="modal" data-bs-target="#staticBackdrop2"
                onclick="showAddStudentFunction()">Add student info</button>
        </div>
    </div>

    <!--news list offcanvas-->
    <div class="upcoming-events myoffcanvases" id="news-list">
        <div class="bg-primary dark-div">
            <div class="first-home-div d-flex align-items-baseline">
                <div>
                    <a href="#sidebar" class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas"
                        role="button" aria-controls="sidebar">
                        <i class="bi bi-list text-primary"></i>
                    </a>
                </div>
                <div class="d-flex nav-link" onclick="hideAllEventBackdrop()">
                    <h1 class="mb-0 mt-0 text-primary fw-normal me-1">SPS</h1>
                    <img src="../images/logo-removebg-preview.png" alt="">
                </div>
            </div>
            <div class="second-home-div">
                <h1 class="text-light text-center p-0 m-0">News</h1>
            </div>
        </div>
        <div class="pt-5">
            <ul id="newslist">
                <!-- Adding list elements -->
            </ul>
            <div class="no-news d-none">
                <p class="text-center">No news</p>
            </div>
        </div>
        <div class="d-flex align-items-center justify-content-center pb-5">
            <button class="btn add-btn my-5" type="button" data-bs-toggle="modal" data-bs-target="#staticBackdrop2"
                onclick="showAddNewsFunction()">Add
                News</button>
        </div>
    </div>



    <!--Error messages-->
    <div class="error">

    </div>
    <!--Modals-->

    <!--Edit modal-->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-4" id="staticBackdropLabel"></h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form class="editEventForm" id="">
                    <div class="modal-body">
                        <div class="mb-5">
                            <label for="editImgInput" class="">Change picture</label>
                            <input type="file" accept="image/*" id="editImgInput" class="" />
                            <img src="" alt="" class="eventImg" id="editImg">
                        </div>
                        <div class="mb-4 d-none eventInput allInputs">
                            <h5>Title: </h5>
                            <input type="text" value="" id="titleInput">
                        </div>
                        <div class="mb-4 d-none eventInput allInputs">
                            <h5>Date: </h5>
                            <input type="date" value="" id="dateInput">
                        </div>
                        <div class="mb-4 d-none adminInput staffInput allInputs">
                            <h5>Name: </h5>
                            <input type="text" value="" id="nameInput">
                        </div>
                        <div class="mb-4 d-none adminInput allInputs">
                            <h5>Postion: </h5>
                            <input type="text" value="" id="positionInput">
                        </div>
                        <div class="mb-4 d-none staffInput allInputs">
                            <h5>Phone number: </h5>
                            <input type="tel" value="" id="phoneInput">
                        </div>
                        <div class="mb-4 d-none staffInput allInputs">
                            <h5>Email Address: </h5>
                            <input type="email" value="" id="emailInput">
                        </div>
                        <div class="mb-4 d-none newsInput allInputs">
                            <h5>Headline: </h5>
                            <input type="text" value="" id="headlineInput">
                        </div>
                        <div class="mb-4 d-none newsInput allInputs">
                            <h5>Content: </h5>
                            <textarea name="" cols="30" rows="10" id="contentInput" value=""></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary" id="editEventButton" data-bs-dismiss="modal">Save
                            Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!--Add new modal-->
    <div class="modal fade" id="staticBackdrop2" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel2" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-4" id="staticBackdropLabel2"><!--modal title--></h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="addEventForm">
                    <div class="modal-body">
                        <div class="mb-5 img-div">
                            <img src="" alt="" class="eventImg d-none" id="displayImage">
                            <label for="newImg-input" class="text-center">
                                Choose image
                            </label>
                            <input type="file" accept="image/*" id="newImg-input" class="" />
                        </div>
                        <div class="mb-4 d-none eventInput allInputs">
                            <h5>Title: </h5>
                            <input type="text" value="" id="newTitleInput">
                        </div>
                        <div class="mb-4 d-none eventInput allInputs">
                            <h5>Date: </h5>
                            <input type="date" value="" id="newDateInput">
                        </div>
                        <div class="mb-4 d-none adminInput staffInput studentinput allInputs">
                            <h5>Name: </h5>
                            <input type="text" value="" id="newNameInput">
                        </div>
                        <div class="mb-4 d-none staffInput allInputs">
                            <h5>Phone number: </h5>
                            <input type="tel" value="" id="newPhoneInput">
                        </div>
                        <div class="mb-4 d-none staffInput studentinput allInputs">
                            <h5>Email Address: </h5>
                            <input type="email" value="" id="newEmailInput">
                        </div>
                        <div class="mb-4 d-none studentinput allInputs">
                            <h5>StudentID: </h5>
                            <input type="text" value="" id="newPasswordInput">
                        </div>
                        <div class="mb-4 d-none newsInput allInputs">
                            <h5>Headline: </h5>
                            <input type="text" value="" id="newsheadline">
                        </div>
                        <div class="mb-4 d-none newsInput allInputs">
                            <h5>Content: </h5>
                            <textarea name="" cols="30" rows="10" id="newscontent" value=""></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary" id="addEventButton"
                            data-bs-dismiss="modal">Add</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!--Ask to delete modal-->
    <div class="modal fade" id="staticBackdrop3" tabindex="-1" aria-labelledby="staticBackdropLabel3"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p class="text-center deleteQuestion"></p>
                    <div class="d-flex justify-content-center">
                        <button class="me-3 btn btn-outline-primary deleteEventButton" id=""
                            data-bs-dismiss="modal">Yes</button>
                        <button class="btn btn-outline-primary" data-bs-dismiss="modal">No</button>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-analytics.js";
        // Add Firebase products that you want to use
        import { getAuth, createUserWithEmailAndPassword, deleteUser, signInWithEmailAndPassword, signOut, updateProfile} from 'https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js'
        import { getFirestore, collection, onSnapshot, setDoc, deleteDoc, doc, query, orderBy, updateDoc, addDoc } from 'https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js'
        import { getStorage, ref, uploadString, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-storage.js";


        //firebase config for the admin page
        const firebaseConfig = {
            apiKey: "AIzaSyD6z-NHLx-jHtua5qxsRYXB6tQ52RJ1QvU",
            authDomain: "steadfastprivateschools-admin.firebaseapp.com",
            projectId: "steadfastprivateschools-admin",
            storageBucket: "steadfastprivateschools-admin.appspot.com",
            messagingSenderId: "283296008725",
            appId: "1:283296008725:web:6d1fca5d8cf93930ba1c1c",
            measurementId: "G-0FX402CLGG"
        };

        //firebase config for elearning page
        const secondaryAppConfig = {
            apiKey: "AIzaSyA-PFbpldT06LHV7UuaXub3S0M5Hun9LZY",
            authDomain: "steadfastprivateschool.firebaseapp.com",
            projectId: "steadfastprivateschool",
            storageBucket: "steadfastprivateschool.appspot.com",
            messagingSenderId: "571984421647",
            appId: "1:571984421647:web:86828fd7a22aa31ef6547a",
            measurementId: "G-8WTZSTF3D8"
        };



        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const secondaryApp = initializeApp(secondaryAppConfig, "secondary");
        const analytics = getAnalytics(app);
        const auth = getAuth(app);
        const secondaryAuth = getAuth(secondaryApp)
        const storage = getFirestore(app)
        const Imstorage = getStorage(app);

        const upcomingEventsList = document.getElementById("upcomingevent")
        const adminList = document.getElementById("adminlist")
        const staffList = document.getElementById("stafflist")
        const studentList = document.getElementById("studentlist")
        const newsList = document.getElementById('newslist')

        //getting all stored data
        const upcomingEvents = collection(storage, 'Upcoming-events');
        const adminLists = collection(storage, "Admin-list");
        const staffLists = collection(storage, "Staff-list");
        const studentLists = collection(storage, "student-list");
        const newsLists = collection(storage, "all-news")

        //getting query, for ordering
        const qUp = query(upcomingEvents, orderBy('fulldate', 'asc'))
        const qAdmin = query(adminLists, orderBy('order', 'asc'))
        const qStaff = query(staffLists, orderBy('Name', 'asc'))
        const qStudent = query(studentLists, orderBy('Username', 'asc'))
        const qNews = query(newsLists, orderBy('fulldate', 'asc'))


        //checking if there is a user signed in
        //console.log(localStorage.getItem("user"))
        let currentuser = localStorage.getItem("user")
        if (currentuser == null) {
            window.location.replace("https://steadfast-private-school.netlify.app/admins/admindashlogin.html");
        }

        //updating the events
        onSnapshot(qUp, (upcomingEvent) => {
            let events = []
            upcomingEvent.docs.forEach((doc) => {
                events.push({ ...doc.data(), id: doc.id })
            })
            //console.log(events)
            upcomingEventsList.innerHTML = ""

            if (events.length == 0) {
                document.querySelector(".no-event").classList.remove("d-none")
            } else {
                document.querySelector(".no-event").classList.add("d-none")

                events.forEach(event => {
                    //console.log(event)
                    var li = document.createElement('li');
                    li.innerHTML = `
                        <div class="mb-5">
                            <h6>${event.Date + ' ' + event.monthyear + " - " + event.Title}</h6>
                            <div class="d-flex justify-content-between pe-5 mt-2">
                                <button type="button" class="btn edit-btn ms-3" data-bs-toggle="modal" id="${event.id}" data-bs-target="#staticBackdrop" onclick="showEditEventModal(event)">Edit</button>
                                <button type="button" class="btn edit-btn ms-3" data-bs-toggle="modal" id="${event.id}" data-bs-target="#staticBackdrop3" onclick="showDeleteEventModal(event)">Delete</button>
                            </div>
                            <p class="d-none">${event.Title}</p>
                            <img width = "20px" class="d-none" src="${event.imageSrc}" alt="">
                            <p class="d-none">${event.fulldate}</p>
                        </div>
                    `;
                    upcomingEventsList.appendChild(li);
                });
            }
        })


        //updating the admin list
        onSnapshot(qAdmin, (admin) => {
            let admins = []
            admin.docs.forEach((doc) => {
                admins.push({ ...doc.data(), id: doc.id })
            })
            //console.log(admins)
            adminList.innerHTML = ""


            admins.forEach(admin => {
                //console.log(admin)
                var li = document.createElement('li');
                li.innerHTML = `
                        <div class="mb-5">
                            <h6>${admin.name + " - " + admin.position}</h6>
                            <p class="d-none">${admin.name}</p>
                            <p class="d-none">${admin.position}</p>
                            <div class="d-flex justify-content-between pe-5 mt-2">
                                <button type="button" class="btn edit-btn ms-3" data-bs-toggle="modal" id="${admin.id}" data-bs-target="#staticBackdrop" onclick="showEditAdminModal(event)">Edit</button>
                            </div>
                            <img width = "20px" class="d-none" src="${admin.picture}" alt="">
                        </div>
                    `;
                adminList.appendChild(li);
            });
        })


        //updating the staff list
        onSnapshot(qStaff, (staff) => {
            let staffs = []
            staff.docs.forEach((doc) => {
                staffs.push({ ...doc.data(), id: doc.id })
            })
            //console.log(staffs)
            staffList.innerHTML = ""


            staffs.forEach(staff => {
                //console.log(staff)
                var li = document.createElement('li');
                li.innerHTML = `
                        <div class="mb-5">
                            <h6>${staff.Name}</h6>
                            <p class="d-none">${staff.Phone}</p>
                            <p class="d-none">${staff.mail}</p>
                            <ul>
                                <li><a href="${"tel:+234" + staff.Phone.slice(1)}" class="text-primary text-decoration-none">${staff.Phone}</a></li>
                                <li><a href="mailto:${staff.mail}" class="text-primary text-break text-decoration-none">${staff.mail}</a></li>
                            </ul>
                            <div class="d-flex justify-content-between pe-5 mt-2">
                                <button type="button" class="btn edit-btn" data-bs-toggle="modal" id="${staff.id}" data-bs-target="#staticBackdrop" onclick="showEditStaffModal(event)">Edit</button>
                                <button type="button" class="btn edit-btn" data-bs-toggle="modal" id="${staff.id}" data-bs-target="#staticBackdrop3" onclick="showDeleteStaffModal(event)">Delete</button>
                            </div>
                            <img width = "20px" class="d-none" src="${staff.photo}" alt="">
                        </div>
                    `;
                staffList.appendChild(li);
            });
        })


        //updating the students list
        onSnapshot(qStudent, (student) => {
            let students = []
            student.docs.forEach((doc) => {
                students.push({ ...doc.data(), id: doc.id })
            })
            //console.log(students)
            studentList.innerHTML = ""


            students.forEach(student => {
                //console.log(student)
                var li = document.createElement('li');
                li.innerHTML = `
                        <div class="mb-5">
                            <div class='d-flex align-items-center'>
                                <img width = "40px" height = '40px' class="me-3" src="${student.imageURL}" alt="">
                            <div>
                                <h6>${student.Username}</h6>
                                <p class='mb-0'>${student.email}</p>
                            </div>
                            </div>
                            <p class="d-none">${student.UserID}</p>
                            <div class="d-flex justify-content-between pe-5 mt-2">
                                <button type="button" class="btn edit-btn ms-3" data-bs-toggle="modal" id="${student.id}" data-bs-target="#staticBackdrop3" onclick="showDeleteStudentModal(event)">Delete</button>
                            </div>
                        </div>
                    `;
                studentList.appendChild(li);
            });
        })


        //updating the news list
        onSnapshot(qNews, (news) => {
            let allnews = []
            news.docs.forEach((doc) => {
                allnews.push({ ...doc.data(), id: doc.id })
            })
            //console.log(allnews)
            newsList.innerHTML = ""

            if (allnews.length == 0) {
                document.querySelector(".no-news").classList.remove("d-none")
            } else {
                document.querySelector(".no-news").classList.add("d-none")

                allnews.forEach(news => {
                    //console.log(news)
                    var li = document.createElement('li');
                    li.style.listStyleType = 'none'
                    li.innerHTML = `
                        <div class="mb-5">
                            <div class='d-flex align-items-center'>
                                <img width = "50px" height = '50px' class="me-3" src="${news.imageSrc}" alt="">
                                <div>
                                    <h6>${news.Headline}</h6>
                                    <p class='mb-0'>Date added: ${news.Date} ${news.monthyear}</p>
                                    <div class='d-none'>${news.Content}</div>
                                </div>
                            </div>
                            <div class="d-flex justify-content-between pe-5 mt-2">
                                <button type="button" class="btn edit-btn ms-3" data-bs-toggle="modal" id="${news.id}" data-bs-target="#staticBackdrop" onclick="showEditNewsModal(event)">Edit</button>
                                <button type="button" class="btn edit-btn ms-3" data-bs-toggle="modal" id="${news.id}" data-bs-target="#staticBackdrop3" onclick="showDeleteNewsModal(event)">Delete</button>
                            </div>
                        </div>
                    `;
                    newsList.appendChild(li);
                });
            }
        })


        //alerts
        const alertDiv = document.querySelector(".error")

        const showAlertsFunction = (message, type, icon) => {

            const wrapper = document.createElement('div')
            wrapper.innerHTML = [
                `
                <div class="alert alert-${type} alert-dismissible" role="alert">
                    <div class="d-flex align-items-baseline">
                        <i class="bi ${icon} me-3"></i>
                        <p class="mb-0 pb-0 me-5">${message}</p>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                `
            ].join('')

            alertDiv.appendChild(wrapper)
            alertDiv.classList.add("active")
        }

        const hideAlertFunction = () => {
            alertDiv.classList.remove("active")
            alertDiv.innerHTML = ""
        }


        //getting image file and changing the src for add new event
        let imgInput = document.getElementById("newImg-input")
        const getImageURl = () => {
            let sampleImg = document.getElementById("displayImage")
            let reader = new FileReader();
            let imgInputFile = imgInput.files[0]
            let imgInputFileName = imgInputFile.name

            //console.log(imgInputFileName)
            reader.readAsDataURL(imgInputFile);
            //console.log(imgInput.files[0]);
            reader.onload = () => {
                sampleImg.setAttribute("src", reader.result)
                sampleImg.classList.remove("d-none")

                let readerResult = reader.result
                //console.log(readerResult)
            }

            const imageURL = sampleImg.getAttribute("src")
            return [imgInputFileName, imageURL]
        }

        //getting image file from edit admin/staff/event
        let editimgInput = document.getElementById("editImgInput")
        const editImageURl = () => {
            let sampleImg = document.getElementById("editImg")
            let reader = new FileReader();
            let editimgFile = editimgInput.files[0]
            let editimgFileName = editimgFile.name

            //console.log(editimgFileName)
            reader.readAsDataURL(editimgFile);
            //console.log(editimg.files[0]);
            reader.onload = () => {
                sampleImg.setAttribute("src", reader.result)
                sampleImg.classList.remove("d-none")

                let readerResult = reader.result
                //console.log(readerResult)
            }

            const imageURL = sampleImg.getAttribute("src")
            return [editimgFileName, imageURL]
        }




        function addNewEvent(e) {
            e.preventDefault()

            let addForm = document.getElementById("addEventForm");
            if (addForm.classList.contains("addEvent")) {
                let input = document.querySelector("#newDateInput").value
                let title = document.getElementById("newTitleInput").value

                //console.log(input)
                let dateEntered = new Date(input);
                let date = dateEntered.getDate()
                //console.log(dateEntered);

                let day = date.toLocaleString('en-us', { minimumIntegerDigits: 2, useGrouping: false })
                let monyear = dateEntered.toLocaleString('en-us', { month: 'short', year: 'numeric' })

                let newReader = getImageURl()
                const newReaderResult = newReader[1]
                //console.log(newReaderResult)
                const fileName = newReader[0]

                //getting events images
                const storageRef = ref(Imstorage, `images/${fileName}`);

                if (input == '' || title == '') {
                    document.getElementById("addEventForm").reset()
                    document.getElementById("displayImage").setAttribute("src", "")
                    document.getElementById("displayImage").classList.add("d-none")
                    console.log("alert")
                } else {
                    try {
                        uploadString(storageRef, newReaderResult, 'data_url').then(
                            (snapshot) => {
                                //console.log('Uploaded a data_url string!');
                                getDownloadURL(snapshot.ref).then((link) => {
                                    //console.log(link)

                                    addDoc(upcomingEvents, {
                                        Date: day,
                                        Title: title,
                                        fulldate: input,
                                        imageSrc: link,
                                        monthyear: monyear
                                    })
                                        .then(() => {
                                            document.getElementById("addEventForm").reset()
                                            document.getElementById("displayImage").setAttribute("src", "")
                                            document.getElementById("displayImage").classList.add("d-none")

                                            showAlertsFunction("Upload Successful", "success", "bi-check2-square")
                                            setTimeout(hideAlertFunction, 5000)
                                        })

                                })
                                //console.log(link)
                            },
                            (error) => {
                                showAlertsFunction(error, "danger", "bi-exclamation-triangle")
                                setTimeout(hideAlertFunction, 5000)
                            }
                        );
                    } catch (error) {
                        showAlertsFunction(error, "danger", "bi-exclamation-triangle")
                        setTimeout(hideAlertFunction, 5000)
                    }
                }
            } else if (addForm.classList.contains("addStaff")) {
                let name = document.querySelector("#newNameInput").value
                let phone = document.getElementById("newPhoneInput").value
                let mail = document.getElementById("newEmailInput").value

                let newReader = getImageURl()
                const newReaderResult = newReader[1]
                //console.log(newReaderResult)
                const fileName = newReader[0]

                //getting events images
                const storageRef = ref(Imstorage, `images/${fileName}`);

                if (name == "") {
                    document.getElementById("addEventForm").reset()
                    document.getElementById("displayImage").setAttribute("src", "")
                    document.getElementById("displayImage").classList.add("d-none")
                    console.log("alert")
                } else {
                    try {
                        uploadString(storageRef, newReaderResult, 'data_url').then(
                            (snapshot) => {
                                //console.log('Uploaded a data_url string!');
                                getDownloadURL(snapshot.ref).then((link) => {
                                    //console.log(link)

                                    addDoc(staffLists, {
                                        Name: name,
                                        Phone: phone,
                                        mail: mail,
                                        photo: link
                                    })
                                        .then(() => {
                                            document.getElementById("addEventForm").reset()
                                            document.getElementById("displayImage").setAttribute("src", "")
                                            document.getElementById("displayImage").classList.add("d-none")

                                            showAlertsFunction("Upload Successful", "success", "bi-check2-square")
                                            setTimeout(hideAlertFunction, 5000)
                                        })

                                })
                                //console.log(link)
                            },
                            (error) => {
                                showAlertsFunction(error, "danger", "bi-exclamation-triangle")
                                setTimeout(hideAlertFunction, 5000)
                            }
                        );
                    } catch (error) {
                        showAlertsFunction(error, "danger", "bi-exclamation-triangle")
                        setTimeout(hideAlertFunction, 5000)
                    }
                }
            } else if (addForm.classList.contains("addStudent")) {
                let name = document.querySelector("#newNameInput").value
                let password = document.getElementById("newPasswordInput").value
                let mail = document.getElementById("newEmailInput").value

                createUserWithEmailAndPassword(secondaryAuth, mail, password)
                    .then((userCredential) => {
                        // Signed in 
                        const user = userCredential.user;
                        //console.log(user)

                        updateProfile(user, {
                            displayName: name,
                            photoURL: "https://firebasestorage.googleapis.com/v0/b/steadfastprivateschools-admin.appspot.com/o/images%2Fuser.png?alt=media&token=f2be9e1d-7260-49c2-aed2-8032acea012c",
                        })
                        //console.log("signed in")
                        //console.log(user)

                        setDoc(doc(storage, "student-list", user.uid), {
                            Username: name,
                            email: mail,
                            imageURL: "https://firebasestorage.googleapis.com/v0/b/steadfastprivateschools-admin.appspot.com/o/images%2Fuser.png?alt=media&token=f2be9e1d-7260-49c2-aed2-8032acea012c",
                            UserID: user.uid,
                            password: password,
                            scores: [],
                            maxScore: 0,
                            timeTaken: []
                        })
                            .then(() => {
                                document.getElementById("addEventForm").reset()
                                document.getElementById("displayImage").setAttribute("src", "")
                                document.getElementById("displayImage").classList.add("d-none")

                                showAlertsFunction("Upload Successful", "success", "bi-check2-square")
                                setTimeout(hideAlertFunction, 5000)
                            })
                    })
                    .catch((error) => {
                        const errorCode = error.code;
                        const errorMessage = error.message;
                        // ..
                        showAlertsFunction(errorMessage, "danger", "bi-check2-square")
                        setTimeout(hideAlertFunction, 5000)
                    });

            } else if (addForm.classList.contains("addNews")) {
                let headline = document.getElementById("newsheadline").value;
                let content = document.getElementById("newscontent").value;
                let newsDate = new Date();

                let dateEntered = new Date(newsDate);
                let date = dateEntered.getDate()
                //console.log(dateEntered);

                let day = date.toLocaleString('en-us', { minimumIntegerDigits: 2, useGrouping: false })
                let monyear = dateEntered.toLocaleString('en-us', { month: 'long', year: 'numeric' })
                //console.log(day)
                //console.log(monyear)

                let newReader = getImageURl()
                const newReaderResult = newReader[1]
                //console.log(newReaderResult)
                const fileName = newReader[0]

                //getting events images
                const storageRef = ref(Imstorage, `images/${fileName}`);

                if (headline == '' || content == '') {
                    document.getElementById("addEventForm").reset()
                    document.getElementById("displayImage").setAttribute("src", "")
                    document.getElementById("displayImage").classList.add("d-none")
                    console.log("alert")
                } else {
                    try {
                        uploadString(storageRef, newReaderResult, 'data_url').then(
                            (snapshot) => {
                                //console.log('Uploaded a data_url string!');
                                getDownloadURL(snapshot.ref).then((link) => {
                                    //console.log(link)

                                    addDoc(newsLists, {
                                        Date: day,
                                        fulldate: newsDate,
                                        imageSrc: link,
                                        monthyear: monyear,
                                        Headline: headline,
                                        Content: content
                                    })
                                        .then(() => {
                                            document.getElementById("addEventForm").reset()
                                            document.getElementById("displayImage").setAttribute("src", "")
                                            document.getElementById("displayImage").classList.add("d-none")

                                            showAlertsFunction("Upload Successful", "success", "bi-check2-square")
                                            setTimeout(hideAlertFunction, 5000)
                                        })

                                })
                                //console.log(link)
                            },
                            (error) => {
                                showAlertsFunction(error, "danger", "bi-exclamation-triangle")
                                setTimeout(hideAlertFunction, 5000)
                            }
                        );
                    } catch (error) {
                        showAlertsFunction(error, "danger", "bi-exclamation-triangle")
                        setTimeout(hideAlertFunction, 5000)
                    }
                }
            }
        }


        const deleteEvent = (event) => {
            let docId = event.target.id
            //console.log(docId)
            let deleteEventButton = document.querySelector(".deleteEventButton");

            if (deleteEventButton.classList.contains("setEvent")) {
                const upcomingEvent = doc(storage, "Upcoming-events", docId);
                deleteDoc(upcomingEvent)
                    .then(() => {
                        showAlertsFunction("Deleted Successful", "success", "bi-check2-square")
                        setTimeout(hideAlertFunction, 5000)
                    })
                    .catch(error => {
                        showAlertsFunction("Error", "danger", "bi-exclamation-triangle")
                        setTimeout(hideAlertFunction, 5000)
                    })
            } else if (deleteEventButton.classList.contains("setStaff")) {
                const staffList = doc(storage, "Staff-list", docId);
                deleteDoc(staffList)
                    .then(() => {
                        showAlertsFunction("Deleted Successful", "success", "bi-check2-square")
                        setTimeout(hideAlertFunction, 5000)
                    })
                    .catch(error => {
                        showAlertsFunction("Error", "danger", "bi-exclamation-triangle")
                        setTimeout(hideAlertFunction, 5000)
                    })
            } else if (deleteEventButton.classList.contains("setStudent")) {
                const studentList = doc(storage, "student-list", docId);

                onSnapshot(qStudent, (student) => {
                    let students = []

                    student.docs.forEach((doc) => {
                        students.push({ ...doc.data(), id: doc.id })
                    })

                    //console.log(students)

                    students.forEach(student => {
                        if (student.id == docId) {
                            //console.log(student)
                            signInWithEmailAndPassword(secondaryAuth, student.email, student.password)
                                .then(() => {
                                    const user = secondaryAuth.currentUser

                                    deleteUser(user)
                                        .then(() => {
                                            showAlertsFunction("Deleted Successful", "success", "bi-check2-square")
                                            setTimeout(hideAlertFunction, 5000)
                                        }).catch((error) => {
                                            showAlertsFunction("Error", "danger", "bi-exclamation-triangle")
                                            setTimeout(hideAlertFunction, 5000)
                                        })
                                    signOut(secondaryAuth).then(() => {
                                        showAlertsFunction("Signed out", "success", "bi-check2-square")
                                        setTimeout(hideAlertFunction, 5000)
                                    }).catch(error => {
                                        showAlertsFunction("Error", "danger", "bi-exclamation-triangle")
                                        setTimeout(hideAlertFunction, 5000)
                                    })
                                })
                            deleteDoc(studentList)
                                .then(() => {
                                    showAlertsFunction("Deleted Successful", "success", "bi-check2-square")
                                    setTimeout(hideAlertFunction, 5000)
                                })
                                .catch(error => {
                                    showAlertsFunction("Error", "danger", "bi-exclamation-triangle")
                                    setTimeout(hideAlertFunction, 5000)
                                })
                        }
                    })
                })
            } else if (deleteEventButton.classList.contains("setNews")) {
                const news = doc(storage, "all-news", docId);
                deleteDoc(news)
                    .then(() => {
                        showAlertsFunction("Deleted Successful", "success", "bi-check2-square")
                        setTimeout(hideAlertFunction, 5000)
                    })
                    .catch(error => {
                        showAlertsFunction("Error", "danger", "bi-exclamation-triangle")
                        setTimeout(hideAlertFunction, 5000)
                    })
            }
        }


        const editEvent = (event) => {
            event.preventDefault()
            let docId = event.target.id
            //console.log(docId)
            const editEventForm = document.querySelector(".editEventForm")

            if (editEventForm.classList.contains("eventz")) {
                let input = document.querySelector("#dateInput").value
                let title = document.getElementById("titleInput").value

                //console.log(input)
                let dateEntered = new Date(input);
                let date = dateEntered.getDate()
                //console.log(dateEntered);

                let day = date.toLocaleString('en-us', { minimumIntegerDigits: 2, useGrouping: false })
                let monyear = dateEntered.toLocaleString('en-us', { month: 'short', year: 'numeric' })

                const upcomingEvent = doc(storage, "Upcoming-events", docId);

                if (input == '' || title == '') {
                    showAlertsFunction("Incomplete input field", "danger", "bi-exclamation-triangle")
                    setTimeout(hideAlertFunction, 5000)
                } else {
                    updateDoc(upcomingEvent, {
                        Date: day,
                        Title: title,
                        fulldate: input,
                        monthyear: monyear
                    })
                        .then(() => {
                            showAlertsFunction("Event updated", "success", "bi-check2-square")
                            setTimeout(hideAlertFunction, 5000)
                        })
                        .catch(error => {
                            showAlertsFunction("Error", "danger", "bi-exclamation-triangle")
                            setTimeout(hideAlertFunction, 5000)
                        })

                    let editimgInput = document.getElementById("editImgInput")
                    //console.log(editimgInput.value)

                    if (editimgInput.value != "") {

                        let newReader = editImageURl()
                        const newReaderResult = newReader[1]
                        //console.log(newReaderResult)
                        const fileName = newReader[0]

                        //getting events images
                        const storageRef = ref(Imstorage, `images/${fileName}`);

                        try {
                            uploadString(storageRef, newReaderResult, 'data_url').then(
                                (snapshot) => {
                                    document.getElementById("editImgInput").value = ""
                                    //console.log('Uploaded a data_url string!');
                                    getDownloadURL(snapshot.ref).then((link) => {
                                        //console.log(link)
                                        updateDoc(upcomingEvent, {
                                            imageSrc: link
                                        })
                                    })
                                },
                                (error) => {
                                    showAlertsFunction(error, "danger", "bi-exclamation-triangle")
                                    setTimeout(hideAlertFunction, 5000)
                                }
                            );
                        } catch (error) {
                            showAlertsFunction(error, "danger", "bi-exclamation-triangle")
                            setTimeout(hideAlertFunction, 5000)
                        }
                    }
                }
            } else if (editEventForm.classList.contains("adminz")) {
                let name = document.querySelector("#nameInput").value
                let position = document.getElementById("positionInput").value

                const adminList = doc(storage, "Admin-list", docId);

                if (name == '' || position == '') {
                    showAlertsFunction("Incomplete input field", "danger", "bi-exclamation-triangle")
                    setTimeout(hideAlertFunction, 5000)
                } else {
                    updateDoc(adminList, {
                        name: name,
                        position: position,
                        //picture: link
                    })
                        .then(() => {
                            showAlertsFunction("Admin updated", "success", "bi-check2-square")
                            setTimeout(hideAlertFunction, 5000)
                        })
                        .catch(error => {
                            showAlertsFunction("Error", "danger", "bi-exclamation-triangle")
                            setTimeout(hideAlertFunction, 5000)
                        })

                    let editimgInput = document.getElementById("editImgInput")
                    //console.log(editimgInput.value)

                    if (editimgInput.value != "") {

                        let newReader = editImageURl()
                        const newReaderResult = newReader[1]
                        //console.log(newReaderResult)
                        const fileName = newReader[0]

                        //getting events images
                        const storageRef = ref(Imstorage, `images/${fileName}`);

                        try {
                            uploadString(storageRef, newReaderResult, 'data_url').then(
                                (snapshot) => {
                                    document.getElementById("editImgInput").value = ""
                                    //console.log('Uploaded a data_url string!');
                                    getDownloadURL(snapshot.ref).then((link) => {
                                        updateDoc(adminList, {
                                            picture: link
                                        })
                                    })
                                },
                                (error) => {
                                    showAlertsFunction(error, "danger", "bi-exclamation-triangle")
                                    setTimeout(hideAlertFunction, 5000)
                                }
                            );
                        } catch (error) {
                            showAlertsFunction(error, "danger", "bi-exclamation-triangle")
                            setTimeout(hideAlertFunction, 5000)
                        }
                    }
                }
            } else if (editEventForm.classList.contains("staffz")) {
                let name = document.querySelector("#nameInput").value
                let phone = document.getElementById("phoneInput").value
                let mail = document.getElementById("emailInput").value

                const staffList = doc(storage, "Staff-list", docId);

                if (name == '') {
                    showAlertsFunction("Name field is not filled", "danger", "bi-exclamation-triangle")
                    setTimeout(hideAlertFunction, 5000)
                } else {
                    updateDoc(staffList, {
                        Name: name,
                        Phone: phone,
                        mail: mail
                    })
                        .then(() => {
                            showAlertsFunction("Staff info updated", "success", "bi-check2-square")
                            setTimeout(hideAlertFunction, 5000)
                        })
                        .catch(error => {
                            showAlertsFunction("Error", "danger", "bi-exclamation-triangle")
                            setTimeout(hideAlertFunction, 5000)
                        })

                    let editimgInput = document.getElementById("editImgInput")
                    //console.log(editimgInput.value)

                    if (editimgInput.value != "") {

                        let newReader = editImageURl()
                        const newReaderResult = newReader[1]
                        //console.log(newReaderResult)
                        const fileName = newReader[0]

                        //getting events images
                        const storageRef = ref(Imstorage, `images/${fileName}`);

                        try {
                            uploadString(storageRef, newReaderResult, 'data_url').then(
                                (snapshot) => {
                                    document.getElementById("editImgInput").value = ""
                                    //console.log('Uploaded a data_url string!');
                                    getDownloadURL(snapshot.ref).then((link) => {
                                        updateDoc(staffList, {
                                            photo: link
                                        })
                                    })
                                },
                                (error) => {
                                    showAlertsFunction(error, "danger", "bi-exclamation-triangle")
                                    setTimeout(hideAlertFunction, 5000)
                                }
                            );
                        } catch (error) {
                            showAlertsFunction(error, "danger", "bi-exclamation-triangle")
                            setTimeout(hideAlertFunction, 5000)
                        }
                    }
                }
            } else if (editEventForm.classList.contains("newz")) {
                let headline = document.getElementById("headlineInput").value;
                let content = document.getElementById("contentInput").value;

                const newsLists = doc(storage, "all-news", docId);

                if (headline == '' || content == '') {
                    showAlertsFunction("Incomplete input field", "danger", "bi-exclamation-triangle")
                    setTimeout(hideAlertFunction, 5000)
                } else {
                    updateDoc(newsLists, {
                        Headline: headline,
                        Content: content
                    })
                        .then(() => {
                            showAlertsFunction("Event updated", "success", "bi-check2-square")
                            setTimeout(hideAlertFunction, 5000)
                        })
                        .catch(error => {
                            showAlertsFunction("Error", "danger", "bi-exclamation-triangle")
                            setTimeout(hideAlertFunction, 5000)
                        })

                    let editimgInput = document.getElementById("editImgInput")
                    //console.log(editimgInput.value)

                    if (editimgInput.value != "") {

                        let newReader = editImageURl()
                        const newReaderResult = newReader[1]
                        //console.log(newReaderResult)
                        const fileName = newReader[0]

                        //getting events images
                        const storageRef = ref(Imstorage, `images/${fileName}`);

                        try {
                            uploadString(storageRef, newReaderResult, 'data_url').then(
                                (snapshot) => {
                                    document.getElementById("editImgInput").value = ""
                                    //console.log('Uploaded a data_url string!');
                                    getDownloadURL(snapshot.ref).then((link) => {
                                        //console.log(link)
                                        updateDoc(newsLists, {
                                            imageSrc: link
                                        })
                                    })
                                },
                                (error) => {
                                    showAlertsFunction(error, "danger", "bi-exclamation-triangle")
                                    setTimeout(hideAlertFunction, 5000)
                                }
                            );
                        } catch (error) {
                            showAlertsFunction(error, "danger", "bi-exclamation-triangle")
                            setTimeout(hideAlertFunction, 5000)
                        }
                    }
                }
            } else if (editEventForm.classList.contains("adminz")) {
                let name = document.querySelector("#nameInput").value
                let position = document.getElementById("positionInput").value

                const adminList = doc(storage, "Admin-list", docId);

                if (name == '' || position == '') {
                    showAlertsFunction("Incomplete input field", "danger", "bi-exclamation-triangle")
                    setTimeout(hideAlertFunction, 5000)
                } else {
                    updateDoc(adminList, {
                        name: name,
                        position: position,
                        //picture: link
                    })
                        .then(() => {
                            showAlertsFunction("Admin updated", "success", "bi-check2-square")
                            setTimeout(hideAlertFunction, 5000)
                        })
                        .catch(error => {
                            showAlertsFunction("Error", "danger", "bi-exclamation-triangle")
                            setTimeout(hideAlertFunction, 5000)
                        })

                    let editimgInput = document.getElementById("editImgInput")
                    //console.log(editimgInput.value)

                    if (editimgInput.value != "") {

                        let newReader = editImageURl()
                        const newReaderResult = newReader[1]
                        //console.log(newReaderResult)
                        const fileName = newReader[0]

                        //getting events images
                        const storageRef = ref(Imstorage, `images/${fileName}`);

                        try {
                            uploadString(storageRef, newReaderResult, 'data_url').then(
                                (snapshot) => {
                                    document.getElementById("editImgInput").value = ""
                                    //console.log('Uploaded a data_url string!');
                                    getDownloadURL(snapshot.ref).then((link) => {
                                        updateDoc(adminList, {
                                            picture: link
                                        })
                                    })
                                },
                                (error) => {
                                    showAlertsFunction(error, "danger", "bi-exclamation-triangle")
                                    setTimeout(hideAlertFunction, 5000)
                                }
                            );
                        } catch (error) {
                            showAlertsFunction(error, "danger", "bi-exclamation-triangle")
                            setTimeout(hideAlertFunction, 5000)
                        }
                    }
                }
            }
        }



        imgInput.addEventListener("change", getImageURl)
        editimgInput.addEventListener("change", editImageURl)
        document.getElementById("addEventForm").addEventListener("submit", addNewEvent)
        document.querySelector(".deleteEventButton").addEventListener("click", deleteEvent)
        document.querySelector(".editEventForm").addEventListener('submit', editEvent)


        const logOutFunction = () => {
            //console.log(auth.currentUser)
            signOut(auth);
            window.open("https://steadfast-private-school.netlify.app/admins/admindashlogin.html", "_self")
        }

        document.getElementById('logOutButton').addEventListener('click', logOutFunction)
        //prevent user from going back
        setTimeout(() => { window.history.forward() }, 0);

    </script>
    <script src="./showModals.js"></script>
</body>

</html>